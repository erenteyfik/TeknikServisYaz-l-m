@model TeknikServisYazılım.Entity.ServiceRegistrationForm
@{
    ViewBag.Title = "ServisFormuKayıt2";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="m-grid__item m-grid__item--fluid m-wrapper" id="div-enter">
    <!-- BEGIN: Subheader -->
    <div class="m-subheader ">
        <div class="d-flex align-items-center">
            <div class="mr-auto">
                <h3 class="m-subheader__title m-subheader__title--separator">
                    Servis Kayıt Formu
                </h3>
            </div>

        </div>
    </div>

    <div class="m-content">

        <div class="m-portlet m-portlet--full-height">
            <div class="row">
                <div class="col-md-3">
                    <div class="m-portlet__head">
                        <div class="m-portlet__head-caption">
                            <div class="m-portlet__head-title">
                                <h3 class="m-portlet__head-text">
                                    Servis Kayıt Formu
                                </h3>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="row" style="margin-top:-68px;margin-left:-100px">

                        @using (Html.BeginForm("SRFKAYITPOST", "Admin", null, FormMethod.Post, new { @class = "row", @id = "" }))
                        {
                            <div class="col-md-9">
                                @Html.TextBoxFor(model => model.customer.UserName, new { @class = "form-control m-input", @placeholder = "CNH TEKNİK", @id = "searchUsername" })

                            </div>
                            <div class="col-md-3">
                                <button type="submit" id="bankbtn" class="btn btn-success btn-sm" style="margin-top:3px;margin-left:-20px">
                                    <span>
                                        <span>
                                            SERVİS
                                        </span>
                                    </span>
                                </button>
                            </div>
                        }

                    </div>
                </div>
            </div>


            <div class="m-portlet__body m-portlet__body--no-padding">
                <!--begin: Form Wizard-->
                <div class="m-wizard m-wizard--3 m-wizard--success" id="m_wizard">
                    <!--begin: Message container -->
                    <div class="m-portlet__padding-x">
                        <!-- Here you can put a message or alert -->
                    </div>
                    <!--end: Message container -->
                    <div class="row m-row--no-padding">
                        <div class="col-xl-3 col-lg-12">
                            <!--begin: Form Wizard Head -->
                            <div class="m-wizard__head">
                                <!--begin: Form Wizard Progress -->
                                <div class="m-wizard__progress">
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                <!--end: Form Wizard Progress -->
                                <!--begin: Form Wizard Nav -->
                                <div class="m-wizard__nav">
                                    <div class="m-wizard__steps">
                                        <div class="m-wizard__step m-wizard__step--current" data-wizard-target="#m_wizard_form_step_1">
                                            <div class="m-wizard__step-info">
                                                <a href="#" class="m-wizard__step-number">
                                                    <span>
                                                        <span>
                                                            1
                                                        </span>
                                                    </span>
                                                </a>
                                                <div class="m-wizard__step-line">
                                                    <span></span>
                                                </div>
                                                <div class="m-wizard__step-label">
                                                    MÜŞTERİ BİLGİLERİ
                                                </div>
                                            </div>
                                        </div>
                                        <div class="m-wizard__step" data-wizard-target="#m_wizard_form_step_2">
                                            <div class="m-wizard__step-info">
                                                <a href="#" class="m-wizard__step-number">
                                                    <span>
                                                        <span>
                                                            2
                                                        </span>
                                                    </span>
                                                </a>
                                                <div class="m-wizard__step-line">
                                                    <span></span>
                                                </div>
                                                <div class="m-wizard__step-label">
                                                    ÜRÜN BİLGİLERİ
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end: Form Wizard Nav -->
                            </div>
                            <!--end: Form Wizard Head -->
                        </div>
                        <div class="col-xl-9 col-lg-12">
                            <!--begin: Form Wizard Form-->
                            @using (Html.BeginForm("ServisFormuKayıt2", "Admin", null, FormMethod.Post, new { @class = "m-wizard__form m-form m-form--label-align-left- m-form--state-", @id = "m_form" }))
                            {
                                @Html.HiddenFor(model => model.SellproductId)
                                @Html.HiddenFor(model => model.sellproduct.Id)

                                @Html.HiddenFor(model => model.customer.Id)


                                <!--begin: Form Body -->
                            <div class="m-portlet__body m-portlet__body--no-padding">
                                <!--begin: Form Wizard Step 1-->
                                <div class="m-wizard__form-step m-wizard__form-step--current" id="m_wizard_form_step_1">
                                    <div class="m-form__section m-form__section--first">
                                        <div class="m-form__heading">
                                            <h3 class="m-form__heading-title">
                                                MÜŞTERİ BİLGİLERİ
                                            </h3>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-xl-3 col-lg-3 col-form-label">
                                                * MÜŞTERİ ADI:
                                            </label>
                                            <div class="col-xl-9 col-lg-9">
                                                @Html.TextBoxFor(model => model.customer.UserName, new { @class = "form-control m-input", @placeholder = "Can ACAR", @id = "searchUsername", @value=Model.customer.UserName})
                                                <span class="auto-username">
                                                    yeni
                                                </span>
                                                <span class="m-form__help">
                                                    Lütfen müşterinin adını ve soyadını giriniz.
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-xl-3 col-lg-3 col-form-label">
                                                * EMAİL:
                                            </label>
                                            <div class="col-xl-9 col-lg-9">
                                                @Html.TextBoxFor(model => model.customer.Email, new { @class = "form-control m-input", @placeholder = "can.acar@gmail.com", @value = Model.customer.Email })
                                                <span class="m-form__help">
                                                    Örn : can.acar@gmail.com
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-xl-3 col-lg-3 col-form-label">
                                                * TELEFON
                                            </label>
                                            <div class="col-xl-9 col-lg-9">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="la la-phone"></i>
                                                        </span>
                                                    </div>
                                                    @Html.TextBoxFor(model => model.customer.Phone, new { @class = "form-control m-input", @placeholder = "541 754 3010", @id = "phone", @value = Model.customer.Phone })
                                                </div>
                                                <span class="m-form__help">
                                                    Telefonu başında 0 olmadan giriniz. Örn: 541 754 30 10
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="m-separator m-separator--dashed m-separator--lg"></div>

                                </div>
                                <!--end: Form Wizard Step 1-->
                                <!--begin: Form Wizard Step 2-->
                                <div class="m-wizard__form-step" id="m_wizard_form_step_2">
                                    <div class="m-form__section m-form__section--first">
                                        <div class="m-form__heading">
                                            <h3 class="m-form__heading-title">
                                                ÜRÜN BİLGİLERİ
                                            </h3>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-xl-2 col-lg-2 col-form-label">
                                                * KATEGORİ ADI:
                                            </label>
                                            <div class="col-xl-4 col-lg-4">
                                                @Html.EnumDropDownListFor(i => i.product.ProductType, new { @class = "form-control m-input" })
                                                @*@Html.TextBoxFor(model => model.product.PName, new { @class = "form-control m-input", @placeholder = "Ürün adı" })*@
                                            </div>
                                            <label class="col-xl-2 col-lg-2 col-form-label">
                                                * SERİ NO:
                                            </label>
                                            <div class="col-xl-4 col-lg-4">
                                                @Html.TextBoxFor(model => model.product.PSerialNumber, new { @class = "form-control m-input", @placeholder = "Seri No" })
                                                <span class="m-form__help">
                                                    Örn : SRV12865
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">

                                            <label class="col-xl-2 col-lg-2 col-form-label">
                                                * MARKA:
                                            </label>
                                            <div class="col-xl-4 col-lg-4">
                                                <div class="" style="display:inline-block;position:relative">
                                                    @Html.TextBoxFor(model => model.product.PBrand, new { @class = "form-control m-input", @style = "width:243px", @placeholder = "Marka", @id = "searchInput2" })
                                                    <span class="auto-error">
                                                        yeni
                                                    </span>
                                                    <span class="m-form__help">
                                                        Örn : Samsung
                                                    </span>
                                                </div>
                                            </div>

                                            <label class="col-xl-2 col-lg-2 col-form-label">
                                                * MODEL:
                                            </label>
                                            <div class="col-xl-4 col-lg-4">
                                                <div class="" style="display:inline-block;position:relative">
                                                    @Html.TextBoxFor(model => model.product.PModel, new { @class = "form-control m-input", @style = "width:243px", @placeholder = "Model", @id = "searchInput3" })
                                                    <span class="auto-error1">
                                                        yeni
                                                    </span>
                                                    <span class="m-form__help">
                                                        Örn : Note 2
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="m-separator m-separator--dashed m-separator--lg"></div>

                                        <div class="form-group m-form__group row">
                                            <div class="m-form__group-sub col-md-3">
                                                <div class="row">
                                                    <label class="col-md-6 col-form-label">
                                                        Ek Parçalar:
                                                    </label>
                                                    <div class="col-md-6" style="margin-left:-30px">
                                                        @Html.TextBoxFor(model => model.product.Ekparcalar, new { @class = "form-control m-input", @placeholder = "Ek parçalar" })
                                                        <span class="m-form__help">
                                                            Örn : Çanta
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="m-form__group-sub col-md-3">
                                                <div class="row">
                                                    <label class="col-md-6 col-form-label">
                                                        Batarya <br />Seri No:
                                                    </label>
                                                    <div class="col-md-6" style="margin-left:-20px">
                                                        @Html.TextBoxFor(model => model.product.PBatterySerialNumber, new { @class = "form-control m-input", @placeholder = "Seri No" })
                                                        <span class="m-form__help">
                                                            Örn : SRV12865
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>


                                            <div class="m-form__group-sub col-md-3">
                                                <div class="row">
                                                    <label class="col-xl-6 form-control-label">
                                                        Batarya:
                                                    </label>
                                                    <div class="col-xl-6" style="margin-left:-40px">
                                                        <label class="m-checkbox m-checkbox--solid m-checkbox--brand">
                                                            @Html.CheckBoxFor(model => model.product.PBattery, new { @class = "form-control m-input", @type = "checkbox" })
                                                            Alındı
                                                            <span></span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="m-form__group-sub col-md-3">
                                                <div class="row">
                                                    <label class="col-xl-6 form-control-label">
                                                        Sarj cihazı:
                                                    </label>
                                                    <div class="col-xl-6" style="margin-left:-40px">
                                                        <label class="m-checkbox m-checkbox--solid m-checkbox--brand">
                                                            @Html.CheckBoxFor(model => model.product.PChanger, new { @class = "form-control m-input", @type = "checkbox" })
                                                            Alındı
                                                            <span></span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>


                                        <div class="form-group m-form__group row">
                                            <label class="col-xl-3 col-lg-3 col-form-label">
                                                Müşterinin Bildirdiği Arıza:
                                            </label>
                                            <div class="col-xl-9 col-lg-9">
                                                @Html.TextAreaFor(model => model.product.PFaultrecord, new { @class = "form-control m-input", @rows = 3, @placeholder = "" })
                                                <span class="m-form__help">
                                                    Örn : Telefon Açılmıyor.
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-xl-3 col-lg-3 col-form-label">
                                                Cihazın Mevcut Durumu:
                                            </label>
                                            <div class="col-xl-9 col-lg-9">
                                                @Html.TextAreaFor(model => model.product.PFaultpersonel, new { @class = "form-control m-input", @rows = 3, @placeholder = "" })
                                                <span class="m-form__help">
                                                    Örn : Telefon Açılmıyor.
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <!--end: Form Wizard Step 2-->

                            </div>
                                <!--end: Form Body -->
                                <!--begin: Form Actions -->
                                <div class="m-portlet__foot m-portlet__foot--fit m--margin-top-40">
                                    <div class="m-form__actions">
                                        <div class="row">
                                            <div class="col-lg-6 m--align-left">
                                                <a href="#" class="btn btn-secondary m-btn m-btn--custom m-btn--icon" data-wizard-action="prev">
                                                    <span>
                                                        <i class="la la-arrow-left"></i>
                                                        &nbsp;&nbsp;
                                                        <span>
                                                            GERİ
                                                        </span>
                                                    </span>
                                                </a>
                                            </div>
                                            <div class="col-lg-6 m--align-right">

                                                <button type="submit" id="savebtn" class="btn btn-primary m-btn m-btn--custom m-btn--icon" data-wizard-action="submit" formtarget="_blank">
                                                    <span>
                                                        <i class="la la-check"></i>
                                                        &nbsp;&nbsp;
                                                        <span>
                                                            KAYDET
                                                        </span>
                                                    </span>
                                                </button>

                                                <a href="#" class="btn btn-success m-btn m-btn--custom m-btn--icon" data-wizard-action="next">
                                                    <span>
                                                        <span>
                                                            DEVAM ET
                                                        </span>
                                                        &nbsp;&nbsp;
                                                        <i class="la la-arrow-right"></i>
                                                    </span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end: Form Actions -->

                            }
                            <!--end: Form Wizard Form-->
                        </div>
                    </div>
                </div>

                @*@Html.Partial("_PrintPartial")*@


            </div>

        </div>

    </div>
</div>

@* Autocomplete için gerekli scriptler *@
<script src="~/Scripts/jquery-3.0.0.min.js"></script>
<script src="~/Scripts/jquery.maskedinput.js"></script>
<link href="~/Content/jquery-ui-1.12.1.custom/jquery-ui.css" rel="stylesheet" />
<script src="~/Content/jquery-ui-1.12.1.custom/jquery-ui.js"></script>

<script type="text/javascript">
        $("body").on("click", "#savebtn", function () {
            setTimeout(function () {
                window.location.pathname="/Admin/ServisFormlarım";
            },1000)
        });


        $("#searchUsername").autocomplete({
            source: function (request, response) {
                $.get({
                    url: '@Url.Action("GetSearchUsernameValue", "Admin")',
                    dataType: "json",
                    data: {
                        search: request.term,
                    },
                    success: function (data) {
                        $('.auto-username').hide();
                        console.log(data);
                        response($.map(data, function (item) {
                            return { label: item.UserName, value: item.UserName };
                        }));
                    },
                    error: function (xhr, status, error) {
                        $('.auto-username').show();
                        setTimeout(function () {
                            $('.auto-username').hide();
                        }, 6000);
                    }
                });
            }
        });


         $("#searchInput2").autocomplete({
            source: function (request, response) {
            $.get({
                url: '@Url.Action("GetSearchBrandValue", "Admin")',
                dataType: "json",
                data: {
                    search: request.term,
                },
                success: function (data) {
                    $('.auto-error').hide();
                    console.log(data);
                    response($.map(data, function (item) {
                        return { label: item.PBrand, value: item.PBrand };
                    }));
                },
                error: function (xhr, status, error) {
                    $('.auto-error').show();
                    setTimeout(function () {
                        $('.auto-error').hide();
                    }, 6000);
                }
            });
        }
         });






    $("#searchInput3").autocomplete({
        source: function (request, response) {
            $.get({
                url: '@Url.Action("GetSearchModelValue", "Admin")',
                dataType: "json",
                data: {
                    search: request.term,
                },
                success: function (data) {
                    $('.auto-error1').hide();
                    console.log(data);
                    response($.map(data, function (item) {
                        return { label: item.PModel, value: item.PModel };
                    }));
                },
                error: function (xhr, status, error) {
                    $('.auto-error1').show();
                    setTimeout(function () {
                        $('.auto-error1').hide();
                    }, 6000);
                }
            });
        }
    });

    $('#div-enter').keypress(function (event) {
        if (event.keyCode === 10 || event.keyCode === 13)
            event.preventDefault();
    });

</script>
